@{
    ViewData["Title"] = "Главная страница";
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

<style>
    /* Общие стили */
    :root {
        --background-color: #1a1a1b; /* Тёмная тема */
        --text-color: #d7dadc;
        --navbar-color: #272729;
        --button-color: #424245;
        --button-hover-color: #5a5a5b;
        --search-bar-bg: #272729;
        --search-bar-border: #424245;
        --placeholder-color: #848586;
        --card-bg: #2a2a2d; /* Темный фон карточек */
        --link-color: #4d4d4d; /* Цвет ссылок на темной теме */
    }

    [data-theme="light"] {
        --background-color: #ffffff; /* Светлая тема */
        --text-color: #333333;
        --navbar-color: #f8f9fa;
        --button-color: #e7e7e7;
        --button-hover-color: #d6d6d6;
        --search-bar-bg: #f1f3f5;
        --search-bar-border: #cccccc;
        --placeholder-color: #666666;
        --card-bg: #f8f9fa; /* Светлый фон карточек */
        --link-color: #0066cc; /* Цвет ссылок на светлой теме */
    }

    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: var(--background-color);
        color: var(--text-color);
        transition: background-color 0.3s, color 0.3s;
    }

    .navbar {
        background-color: var(--navbar-color);
        padding: 0.5rem 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        transition: background-color 0.3s;
    }

    .navbar-brand {
        font-size: 24px;
        color: var(--text-color);
        text-decoration: none;
        font-weight: bold;
    }

        .navbar-brand:hover {
            color: var(--text-color);
        }

    .search-bar {
        background-color: var(--search-bar-bg);
        border: 1px solid var(--search-bar-border);
        border-radius: 20px;
        padding: 5px 10px;
        display: flex;
        align-items: center;
        color: var(--text-color);
        flex: 1;
        max-width: 400px;
        margin: 0 auto; /* Центрирование */
        transition: background-color 0.3s, border-color 0.3s;
    }

        .search-bar input {
            background-color: transparent;
            border: none;
            outline: none;
            color: var(--text-color);
            width: 100%;
            margin-left: 5px;
        }

            .search-bar input::placeholder {
                color: var(--placeholder-color);
            }

        .search-bar i {
            color: var(--placeholder-color);
        }

    .user-actions {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .btn {
        color: var(--text-color);
        background-color: var(--button-color);
        border-radius: 20px;
        padding: 5px 15px;
        border: none;
        transition: background-color 0.3s;
    }

        .btn:hover {
            background-color: var(--button-hover-color);
        }

    .user-avatar {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        object-fit: cover;
        cursor: pointer;
    }

    .card {
        background-color: var(--card-bg);
        color: var(--text-color);
        border: 1px solid var(--search-bar-border);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        transition: background-color 0.3s, border-color 0.3s, box-shadow 0.3s;
    }

        .card:hover {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

    .card-title,
    .card-body {
        color: var(--text-color);
    }

        .card-body p {
            color: var(--text-color);
            font-size: 0.95rem;
        }

    .text-muted {
        color: var(--placeholder-color) !important;
    }

    .nav-link {
        color: var(--text-color);
    }

        .nav-link:hover {
            color: var(--link-color);
        }

    .pagination .page-item.active .page-link {
        background-color: var(--link-color);
        border-color: var(--link-color);
    }

    .thumbnail {
        width: 80px;
        height: 80px;
        object-fit: cover;
    }

    .text-dark {
        color: var(--text-color) !important;
    }

    .text-muted {
        color: var(--placeholder-color) !important;
    }

    .card a {
        color: var(--text-color);
        text-decoration: none;
    }

        .card a:hover {
            color: var(--link-color);
        }

    /* Стили для вложенного списка */
    .list-unstyled {
        margin: 0;
        padding: 0;
        list-style: none;
        border-left: 2px solid #ddd;
    }

        .list-unstyled > li {
            margin: 5px 0;
        }

    /* Анимация для раскрытия */
    .collapse {
        transition: height 0.3s ease;
    }


</style>
<div class="container mt-4">
    <div class="row">
        <!-- Боковая панель слева -->
        <div class="col-md-3">
            <div class="card" style="position: sticky; top: 20px;">
                <div class="card-body">
                    <h4 class="card-title">Навигация</h4>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" data-url="/Home/Home">
                                <i class="bi bi-house-door-fill me-2"></i> Главная
                            </a>
                        </li>
                        <!-- Список категорий -->
                        <li class="nav-item">
                            <a class="nav-link collapsed" href="#categoriesDropdown" data-bs-toggle="collapse" role="button" aria-expanded="false">
                                <i class="bi bi-grid-3x3-gap-fill me-2"></i> Категории
                                <i class="bi bi-chevron-down float-end"></i>
                            </a>
                            <ul class="collapse list-unstyled" id="categoriesDropdown">
                                <li>
                                    <a class="nav-link" href="#" data-url="/Home/Categories?category=Новости">
                                        <i class="bi bi-newspaper me-2"></i> Новости
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="#" data-url="/Home/Categories?category=Технологии">
                                        <i class="bi bi-cpu me-2"></i> Технологии
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="#" data-url="/Home/Categories?category=Искусство">
                                        <i class="bi bi-palette me-2"></i> Искусство
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="#" data-url="/Home/Categories?category=Наука">
                                        <i class="bi bi-mortarboard me-2"></i> Наука
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="#" data-url="/Home/Categories?category=Образование">
                                        <i class="bi bi-book me-2"></i> Образование
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="#" data-url="/Home/Categories?category=Развлечения">
                                        <i class="bi bi-tv me-2"></i> Развлечения
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="#" data-url="/Home/Categories?category=Спорт">
                                        <i class="bi bi-balloon me-2"></i> Спорт
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="#" data-url="/Home/Categories?category=Музыка">
                                        <i class="bi bi-music-note-list me-2"></i> Музыка
                                    </a>
                                </li>
                                <li>
                                    <a class="nav-link" href="#" data-url="/Home/Categories?category=Другое">
                                        <i class="bi bi-archive me-2"></i> Другое
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-url="/Home/Popular">
                                <i class="bi bi-star-fill me-2"></i> Популярное
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Контейнер для динамического контента -->
        <div class="col-md-6">
            <div id="dynamic-content"></div>
        </div>

        <!-- Боковая панель справа -->
        <div class="col-md-3">
            <div class="card" style="position: sticky; top: 20px;">
                <div class="card-body">
                    <h4 class="card-title">Помощь</h4>
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="#" data-url="/Home/Rules">
                                <i class="bi bi-shield-shaded me-2"></i> Правила пользования
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-url="/Home/Privacy">
                                <i class="bi bi-list me-2"></i> Политика приватности
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </div>
</div>




<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function () {
        // Загружаем главную страницу при первой загрузке
        loadContent('/Home/Home');

        // Используем "on" вместо "click" для динамических элементов
        $(document).on("click", ".nav-link", function (e) {
            e.preventDefault();

            // Убираем "active" у всех ссылок и добавляем на текущую
            $(".nav-link").removeClass("active");
            $(this).addClass("active");

            // Загружаем контент
            var url = $(this).data("url");
            if (url) {
                loadContent(url);
            }
        });

        // Функция загрузки контента
        function loadContent(url) {
            $("#dynamic-content").fadeOut(100, function () {
                $(this).load(url, function (response, status) {
                    if (status === "error") {
                        $(this).html("<p>Ошибка загрузки содержимого</p>");
                    }
                    $(this).fadeIn(100);
                });
            });
        }
    });
</script>



<!-- Модальное окно для изображения -->
<div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content bg-transparent border-0">
            <button type="button" class="btn-close position-absolute top-0 end-0 m-2" data-bs-dismiss="modal" aria-label="Close"></button>
            <img src="" alt="Full-size Image" class="img-fluid rounded">
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const modal = new bootstrap.Modal(document.getElementById("imageModal"));
        const modalImage = document.querySelector("#imageModal img");

        // Делегирование событий на body
        document.body.addEventListener("click", function (event) {
            if (event.target && event.target.classList.contains("thumbnail")) {
                event.stopPropagation(); // Предотвращаем переход по ссылке
                const fullSizeImage = event.target.getAttribute("data-fullsize");

                if (fullSizeImage) {
                    modalImage.src = fullSizeImage;
                    modal.show();
                } else {
                    console.error("Отсутствует атрибут data-fullsize у изображения.");
                }
            }
        });
    });
</script>


